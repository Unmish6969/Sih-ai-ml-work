{
  "site_id": 4,
  "timestamp": "20251209_131933",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 7.80978922176891,
    "train_mae": 5.202633100978584,
    "train_bias": -0.011025757697526246,
    "train_r2": 0.9534801438146923,
    "val_rmse": 9.531223305371997,
    "val_mae": 6.148777083875531,
    "val_bias": 0.48391950389386235,
    "val_r2": 0.9416923382813406,
    "best_iteration": 440,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296,
        301,
        306,
        311,
        316,
        321,
        326,
        331,
        336,
        341,
        346,
        351,
        356,
        361,
        366,
        371,
        376,
        381,
        386,
        391,
        396,
        401,
        406,
        411,
        416,
        421,
        426,
        431,
        436
      ],
      "train_rmse": [
        34.76794124210715,
        28.23295571095164,
        23.52702741766332,
        19.896272423904872,
        17.153006851590785,
        15.273215908353768,
        13.736954506941728,
        12.515929823053474,
        11.648136102059611,
        11.059647766287585,
        10.649802444836455,
        10.328721271064584,
        10.082716388019245,
        9.901080936128752,
        9.737349589841221,
        9.618251048251706,
        9.517602579580727,
        9.439556771814349,
        9.361415473453969,
        9.298209229096651,
        9.23473164947674,
        9.183487405388831,
        9.139883107947732,
        9.094842767867528,
        9.060119561905376,
        9.017856120398433,
        8.985037106520505,
        8.951378362612527,
        8.917120654156903,
        8.887793812093019,
        8.852471488052888,
        8.820848306771738,
        8.798036040548789,
        8.770960071227606,
        8.742653462157264,
        8.715932779393649,
        8.691338570350984,
        8.667375553971421,
        8.64605988548616,
        8.619248130752204,
        8.597854251777596,
        8.574558531313105,
        8.547442378020783,
        8.5312575915723,
        8.511562368477273,
        8.488065540678917,
        8.465773437748716,
        8.442286313522292,
        8.422366605782484,
        8.402737930398711,
        8.376845497330041,
        8.359259648532365,
        8.342807918775074,
        8.325314297689623,
        8.308735993367382,
        8.288830344185348,
        8.272860071183038,
        8.2518305338675,
        8.237617467514433,
        8.222373702656862,
        8.207588556172237,
        8.191562322742701,
        8.177886230299585,
        8.164194178905113,
        8.150295907819354,
        8.133103739075024,
        8.115894934821737,
        8.100337145953041,
        8.08506085858733,
        8.070124334961433,
        8.057264324128315,
        8.043618345290334,
        8.030510338242989,
        8.01663542242535,
        8.001822969979886,
        7.984067214056251,
        7.967745847105388,
        7.956946832713413,
        7.946648010279438,
        7.933753824911671,
        7.92235729996247,
        7.911610106304805,
        7.8964732114697505,
        7.882237994659821,
        7.870991749591991,
        7.85692374121805,
        7.840703505562614,
        7.823121283672511
      ],
      "train_r2": [
        0.07802809366677321,
        0.39204360453913334,
        0.5778236946209001,
        0.6980721494655842,
        0.7755910054644162,
        0.8220816591258407,
        0.8560735353555997,
        0.8805225413140739,
        0.8965161421587425,
        0.9067084456966562,
        0.9134946752266493,
        0.9186321476388438,
        0.9224619561526167,
        0.925230416916742,
        0.9276828566696373,
        0.9294410751230591,
        0.9309100512899061,
        0.9320385019588122,
        0.933159024684412,
        0.9340585691338783,
        0.9349558417979204,
        0.9356757091254363,
        0.9362850978224687,
        0.9369115106429735,
        0.9373923222090356,
        0.9379750616248761,
        0.9384256993760833,
        0.9388861608481526,
        0.9393530417610058,
        0.9397513001473494,
        0.9402292354582623,
        0.9406555041453704,
        0.9409620578534613,
        0.9413248774180238,
        0.9417029919308979,
        0.9420588004656498,
        0.9423853306225961,
        0.9427025931453515,
        0.9429840695186821,
        0.94333713829006,
        0.9436180755448879,
        0.9439231931053813,
        0.9442773064831003,
        0.9444881311973068,
        0.9447441442442718,
        0.9450487992984179,
        0.9453370556141033,
        0.9456399445130272,
        0.9458961686904713,
        0.9461480572841549,
        0.9464794277320274,
        0.9467039076361464,
        0.9469134836331965,
        0.9471358792017752,
        0.9473462075714401,
        0.947598195941047,
        0.9477999288449335,
        0.9480649757834403,
        0.9482437289066987,
        0.9484351023083775,
        0.9486203794897696,
        0.9488208324912026,
        0.9489915805656501,
        0.949162242082522,
        0.9493351815113982,
        0.9495486999991443,
        0.9497619735675988,
        0.9499543968250588,
        0.950142979130363,
        0.9503270229375969,
        0.9504852078740644,
        0.9506527847602572,
        0.9508134877086301,
        0.9509833073392876,
        0.9511642776884368,
        0.9513807666361088,
        0.9515793424349342,
        0.9517105065149918,
        0.9518354295742729,
        0.9519916058760562,
        0.9521294311499274,
        0.9522592221440819,
        0.9524417275561088,
        0.9526130425405852,
        0.9527481679078981,
        0.9529169255787792,
        0.9531111263317494,
        0.9533211805033629
      ],
      "val_rmse": [
        38.55746462743263,
        31.304921198705916,
        26.115564575316764,
        22.10858289105967,
        19.002083003615436,
        16.8455761828964,
        15.02699459723566,
        13.710541014758137,
        12.781259769940222,
        12.128568460499562,
        11.648726664507233,
        11.288979721371833,
        10.988898226526068,
        10.812838042450059,
        10.531523179689998,
        10.414291790856957,
        10.296147670180291,
        10.232377513441794,
        10.16709031727993,
        10.084816277700149,
        10.045153655196312,
        9.995131680842979,
        9.965684679943687,
        9.938800765719513,
        9.90397107755084,
        9.875063760843204,
        9.851051447116408,
        9.833339007846384,
        9.821469488161958,
        9.805285441678484,
        9.789727753956168,
        9.787988195623742,
        9.784879954446255,
        9.765092206986477,
        9.75433023476695,
        9.739672357352639,
        9.730219134094114,
        9.716235271764237,
        9.699302694492554,
        9.69328059317432,
        9.69197737026499,
        9.688097582588838,
        9.688071193166744,
        9.686023761437255,
        9.676151910236822,
        9.668812020589439,
        9.661541149149237,
        9.63884330594517,
        9.638047771134953,
        9.633352617520899,
        9.625510915603407,
        9.623728662913624,
        9.613583123404917,
        9.603291621811353,
        9.602146869518554,
        9.59591245361614,
        9.599467783742746,
        9.592234632501278,
        9.585657288475083,
        9.57428343476934,
        9.56877007525369,
        9.564771767741407,
        9.566041720225622,
        9.563907932055152,
        9.570556646483757,
        9.566928192750662,
        9.564919451149342,
        9.563237972026839,
        9.562055653989,
        9.565405304077693,
        9.566565373956154,
        9.564316659974443,
        9.567203100435233,
        9.563017701083316,
        9.56601553972238,
        9.566392645757825,
        9.563503093841959,
        9.561337136135016,
        9.552394112951601,
        9.549550814486267,
        9.539912726847515,
        9.545983353813849,
        9.545280546430485,
        9.543420768808929,
        9.542161843768348,
        9.540131700492092,
        9.531747147584953,
        9.536385061439159
      ],
      "val_r2": [
        0.045787121259285524,
        0.3709957701366492,
        0.5622489725009503,
        0.686274262764426,
        0.7682441220821915,
        0.8178622042771342,
        0.8550652263281708,
        0.8793471678740241,
        0.895148255765364,
        0.9055836028638224,
        0.9129065999000907,
        0.9182029347868303,
        0.922493765405223,
        0.924957424254416,
        0.928811357395698,
        0.9303874056453612,
        0.9319578760798559,
        0.9327981165013641,
        0.933652937519183,
        0.9347223791179057,
        0.9352348307596661,
        0.9358782485518775,
        0.936255514584426,
        0.9365989711258091,
        0.9370425596080199,
        0.9374095386073874,
        0.9377135598363563,
        0.9379373436555083,
        0.9380870810589412,
        0.9382909560490348,
        0.9384866236617732,
        0.9385084826147447,
        0.9385475304998063,
        0.9387958271374489,
        0.9389306573334981,
        0.9391140578020728,
        0.9392321909514199,
        0.9394067313267583,
        0.9396177402546069,
        0.9396926972309567,
        0.939708912293442,
        0.9397571727857326,
        0.9397575009763224,
        0.9397829610226416,
        0.9399056430919809,
        0.9399967782164262,
        0.9400869881972773,
        0.9403681646112445,
        0.940378007543983,
        0.9404360828379198,
        0.9405330153173345,
        0.9405550350069409,
        0.9406803052345137,
        0.940807242705418,
        0.9408213539099091,
        0.9408981751717523,
        0.940854372057502,
        0.9409434703503937,
        0.9410244320769224,
        0.9411643038676983,
        0.9412320455320038,
        0.9412811476131328,
        0.9412655539105841,
        0.9412917534385206,
        0.9412100985236768,
        0.9412546677182132,
        0.9412793343200633,
        0.9412999782774005,
        0.9413144917308067,
        0.9412733687011983,
        0.9412591233817355,
        0.9412867353617305,
        0.9412512915508621,
        0.9413026823323032,
        0.9412658754009763,
        0.9412612445430494,
        0.9412967235488088,
        0.9413233109643969,
        0.9414330239839498,
        0.9414678840636252,
        0.9415859740115299,
        0.9415116080088837,
        0.9415202199159078,
        0.9415430057922552,
        0.9415584275412404,
        0.941583292377152,
        0.9416859288514221,
        0.9416291666581287
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 7.666208080484144,
    "train_mae": 5.162650795095632,
    "train_bias": 0.002882431642729123,
    "train_r2": 0.8767062818338456,
    "val_rmse": 9.610242466189934,
    "val_mae": 6.352226916439513,
    "val_bias": -1.1603163562065515,
    "val_r2": 0.875990849265814,
    "best_iteration": 230,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226
      ],
      "train_rmse": [
        20.967137077015177,
        17.487412344439626,
        14.890136585469186,
        13.213204380273423,
        11.933221263472067,
        10.962142285639581,
        10.289252994095692,
        9.819323755114391,
        9.428877984953733,
        9.160503388904388,
        8.964985588911427,
        8.803995524786425,
        8.683464629835015,
        8.580920405360489,
        8.497346151644079,
        8.423479202870695,
        8.364547935084603,
        8.318226273776,
        8.272777590074664,
        8.233102863001855,
        8.198718049550944,
        8.161243869182327,
        8.132097112076904,
        8.103834101522928,
        8.077515873160461,
        8.054162380585392,
        8.033629339776471,
        8.007023065491753,
        7.982695429892844,
        7.9623661868174604,
        7.940109491559002,
        7.918260718712937,
        7.897456480085602,
        7.877299588569198,
        7.858075594317331,
        7.840418457664034,
        7.82115732859902,
        7.804581800350301,
        7.786486424633297,
        7.769272154231364,
        7.749091212865675,
        7.734523937232431,
        7.717227771432797,
        7.701318741815563,
        7.68985153126279,
        7.677211989903628
      ],
      "train_r2": [
        0.07773014664279643,
        0.3584495039360617,
        0.5348670490282987,
        0.6337344691752802,
        0.7012587935667455,
        0.7479012957326927,
        0.7779005742569886,
        0.7977246772168504,
        0.8134910077861469,
        0.8239571368270782,
        0.8313917054977378,
        0.8373929503028038,
        0.841814809028002,
        0.8455288104188899,
        0.8485231154418931,
        0.8511452287025818,
        0.8532207404252,
        0.8548419238045741,
        0.8564238044701271,
        0.8577976325448352,
        0.8589829429842242,
        0.8602691005450137,
        0.861265377608622,
        0.8622280430186894,
        0.8631214537112258,
        0.8639117885653556,
        0.8646047825251411,
        0.8655001180894052,
        0.8663161750317304,
        0.866996203594509,
        0.8677387184779672,
        0.8684656028732496,
        0.8691558751975734,
        0.8698229368188409,
        0.8704575374127645,
        0.8710390485205124,
        0.8716718929208642,
        0.8722152529547677,
        0.8728071187207586,
        0.8733688900348177,
        0.8740258926243184,
        0.8744990770587618,
        0.8750597470404718,
        0.875574343589596,
        0.8759446056158855,
        0.8763520815328277
      ],
      "val_rmse": [
        31.530018669651906,
        26.25787139763225,
        22.197387496124183,
        19.43337127565346,
        17.22417326994253,
        15.474173507431003,
        14.210257714783362,
        13.262553522567659,
        12.392001904272332,
        11.814617539436192,
        11.379366631332589,
        11.064076780544225,
        10.813282445600484,
        10.58886620354844,
        10.42931980179935,
        10.312220983681232,
        10.199551304986553,
        10.111639779233084,
        10.05068640773055,
        9.989259134460397,
        9.937959137906375,
        9.864889423892135,
        9.850962715764174,
        9.809670206313085,
        9.77493596390253,
        9.776529827737885,
        9.753776849366782,
        9.718987678874106,
        9.691491487155535,
        9.67616924217815,
        9.669709449007042,
        9.656032690878513,
        9.643205316984709,
        9.637325855422993,
        9.630243236798544,
        9.620464828558719,
        9.619407225825404,
        9.615585224341535,
        9.617532737782968,
        9.613240199446917,
        9.618768340999333,
        9.622571669090716,
        9.621599916626916,
        9.620358182776123,
        9.612234967942124,
        9.601063671841047
      ],
      "val_r2": [
        -0.33485317556055993,
        0.07422792385073562,
        0.3384102467419243,
        0.4929143284081058,
        0.6016527580214603,
        0.6784859415598619,
        0.7288628968109815,
        0.7638220534518103,
        0.7938098160086404,
        0.8125763558487353,
        0.8261313734396685,
        0.8356327061034772,
        0.8429998247368213,
        0.8494488890056537,
        0.8539515296601468,
        0.857212738191374,
        0.8603158347205737,
        0.862713376879706,
        0.8643635268364636,
        0.8660164125191119,
        0.8673890285191787,
        0.8693319270374624,
        0.86970060660512,
        0.8707906751674432,
        0.8717040682469558,
        0.8716622259437481,
        0.872258893412504,
        0.8731685065601165,
        0.8738851346823842,
        0.8742835945751073,
        0.8744513946368945,
        0.8748062933219769,
        0.8751386948098441,
        0.8752909042515541,
        0.8754741381515405,
        0.8757268932448787,
        0.875754215075043,
        0.8758529266121576,
        0.8758026327250937,
        0.8759134725843716,
        0.8757707184018717,
        0.8756724567301905,
        0.8756975663371139,
        0.8757296484400806,
        0.8759394220379269,
        0.8762276197571879
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}