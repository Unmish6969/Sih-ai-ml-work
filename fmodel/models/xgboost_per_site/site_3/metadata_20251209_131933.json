{
  "site_id": 3,
  "timestamp": "20251209_131933",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 8.881518049811174,
    "train_mae": 5.437544718268484,
    "train_bias": -0.0031329957503914638,
    "train_r2": 0.9503142746745263,
    "val_rmse": 13.169987484802995,
    "val_mae": 7.094229854717568,
    "val_bias": 0.8516248019448849,
    "val_r2": 0.9064446061105171,
    "best_iteration": 480,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296,
        301,
        306,
        311,
        316,
        321,
        326,
        331,
        336,
        341,
        346,
        351,
        356,
        361,
        366,
        371,
        376,
        381,
        386,
        391,
        396,
        401,
        406,
        411,
        416,
        421,
        426,
        431,
        436,
        441,
        446,
        451,
        456,
        461,
        466,
        471,
        476
      ],
      "train_rmse": [
        38.28351316788626,
        31.254525780218284,
        26.2281252860051,
        22.358764078386983,
        19.477051406520417,
        17.486772553530937,
        15.804871497016524,
        14.439462525900472,
        13.486777966785404,
        12.830720488903763,
        12.401514340439235,
        12.026788645757764,
        11.727045503261902,
        11.530950106198183,
        11.372066579814073,
        11.239707217578518,
        11.134972924833617,
        11.030138711483247,
        10.9428512564747,
        10.875453078816246,
        10.79019448022576,
        10.728515117929526,
        10.683766473961846,
        10.619250229676574,
        10.578044641020618,
        10.52603228169828,
        10.484076411913419,
        10.443459139269029,
        10.403274896582506,
        10.367927513608443,
        10.328744852353921,
        10.276745747801543,
        10.239098147225056,
        10.208541615455868,
        10.178652976353176,
        10.140770385775454,
        10.116613904958554,
        10.08142664791402,
        10.046659692586074,
        10.013556377585124,
        9.989710025960978,
        9.963172426838707,
        9.937648842234513,
        9.90233838493477,
        9.874484653802158,
        9.849166885264578,
        9.824248831141785,
        9.79534013893282,
        9.773993072153143,
        9.751843390065323,
        9.731045616560714,
        9.711989635162656,
        9.688116021821028,
        9.665555484776295,
        9.647345496598124,
        9.6268565263083,
        9.602080849704405,
        9.576344298017649,
        9.550237294115124,
        9.527404635916277,
        9.504384539318194,
        9.488276556977281,
        9.469958952890607,
        9.45227257726129,
        9.434847937531112,
        9.413648734600962,
        9.387418872409382,
        9.371902832318945,
        9.355356964470094,
        9.338207658543263,
        9.321468854439624,
        9.301151368499355,
        9.28785063912196,
        9.270577406342188,
        9.249749923595168,
        9.231158270078613,
        9.208417703721326,
        9.192391569391457,
        9.176457746110643,
        9.161742363470596,
        9.146853293731342,
        9.132377446369071,
        9.11429274493422,
        9.087415814709129,
        9.073340479918775,
        9.051868801889482,
        9.035835412062568,
        9.020658596874545,
        9.002111215207783,
        8.983052281541026,
        8.968772637699516,
        8.956246037414976,
        8.941229557540565,
        8.925087873148406,
        8.90840029792652,
        8.893310245507466
      ],
      "train_r2": [
        0.07683188009019615,
        0.384705467076751,
        0.5666969682758355,
        0.6851143890204013,
        0.7610518625331617,
        0.8073910111708669,
        0.8426599923733507,
        0.8686714090701266,
        0.8854292795201368,
        0.8963046415929032,
        0.9031261258502675,
        0.9088919846134631,
        0.9133767549165037,
        0.9162494988252757,
        0.9185415736363229,
        0.920426726303039,
        0.9219027827587207,
        0.9233664090169327,
        0.9245744960344198,
        0.9255007421036902,
        0.9266642439921805,
        0.9275002575647121,
        0.9281037892203573,
        0.9289694892137608,
        0.9295196552707203,
        0.9302110564946315,
        0.9307662933126719,
        0.9313017028156396,
        0.9318293590117973,
        0.9322918210956821,
        0.9328026220299834,
        0.9334775167846581,
        0.9339640179856333,
        0.9343575721147818,
        0.9347413861376788,
        0.9352262371180033,
        0.9355344666599551,
        0.9359821303621619,
        0.9364229149236425,
        0.9368411922485638,
        0.9371416477019834,
        0.9374751697139605,
        0.9377951107124265,
        0.938236378229442,
        0.9385833523912315,
        0.9388978881127044,
        0.9392066695059982,
        0.9395639222543695,
        0.9398270529206757,
        0.9400994700257427,
        0.9403546975038739,
        0.9405880715803944,
        0.9408798004972682,
        0.9411548241385034,
        0.9413763448850433,
        0.9416250895461376,
        0.941925170227497,
        0.9422360700885813,
        0.9425505925170129,
        0.9428249636377533,
        0.9431009222730211,
        0.9432936233723573,
        0.9435123611576963,
        0.9437231600989456,
        0.9439304541255206,
        0.944182136891438,
        0.9444927614212006,
        0.9446761005878255,
        0.9448712741619842,
        0.9450732018626905,
        0.9452699387364285,
        0.945508262848255,
        0.9456639987565618,
        0.9458659153645125,
        0.9461088797792275,
        0.946325300358593,
        0.9465894253131528,
        0.9467751727934265,
        0.946959529599867,
        0.9471295047743216,
        0.9473012085425041,
        0.9474678791962097,
        0.9476757302325202,
        0.947983870921147,
        0.9481448798247856,
        0.948390015344714,
        0.9485726848396405,
        0.948745296965953,
        0.9489558499367572,
        0.949171758673976,
        0.9493332254627526,
        0.9494746582385554,
        0.9496439427193697,
        0.9498255951134714,
        0.9500130456824754,
        0.9501822493266
      ],
      "val_rmse": [
        41.59988289562954,
        34.403376903693584,
        29.42623666094583,
        25.59430344743052,
        22.679494599370614,
        20.89266105389471,
        19.19984814422656,
        17.828230699429827,
        16.914041224335364,
        16.284311521282934,
        15.857876050664526,
        15.522727645088855,
        15.219837162753427,
        15.052909082092812,
        14.886067395558804,
        14.748418120070461,
        14.655018044351065,
        14.495745941384781,
        14.398817074591644,
        14.333892746437346,
        14.24507669647552,
        14.194365369626313,
        14.101192959824,
        14.058052593067048,
        14.04558379309774,
        13.969470342185463,
        13.954386903572958,
        13.878537421356157,
        13.8137178452243,
        13.787474801509427,
        13.788825700005663,
        13.741643733857842,
        13.709658862582065,
        13.67075442429709,
        13.64615636449436,
        13.622570372334415,
        13.595836795345212,
        13.590598986156799,
        13.549516350346696,
        13.519326078249438,
        13.505299882856018,
        13.482450997930115,
        13.468915853575457,
        13.432190069382113,
        13.43143325446041,
        13.420957005859956,
        13.408638343314285,
        13.398194900363977,
        13.398685942525008,
        13.396644095681102,
        13.384313167111758,
        13.383088310908182,
        13.386327592027783,
        13.37260172089235,
        13.365150990783428,
        13.370199307439236,
        13.373202809549882,
        13.360726519266814,
        13.3455894158565,
        13.341615208976684,
        13.313002060845804,
        13.316493887976716,
        13.314514549238346,
        13.303864189097279,
        13.293923755992717,
        13.278676017458551,
        13.283599164940563,
        13.261789578636204,
        13.255942474591668,
        13.245718862515796,
        13.253225431651495,
        13.246584593893566,
        13.22398092266043,
        13.221364542086295,
        13.208180810772738,
        13.21794534704496,
        13.204841287934425,
        13.206137231780122,
        13.198531989168798,
        13.210315215177802,
        13.210011343188585,
        13.213321871726546,
        13.208263131118782,
        13.20857304866084,
        13.206869731657676,
        13.201162783445548,
        13.20103946445843,
        13.186148756663005,
        13.188699769837976,
        13.182493884983142,
        13.178383126061277,
        13.190973392037854,
        13.179354119842777,
        13.186432887749895,
        13.181035238607159,
        13.165829909386938
      ],
      "val_r2": [
        0.06656877824900331,
        0.36158915825969273,
        0.5329455073023168,
        0.6466665642795737,
        0.7225626984770681,
        0.7645570859116118,
        0.8011646057962593,
        0.8285590369599262,
        0.845690424483562,
        0.8569667815870853,
        0.8643598863455998,
        0.8700326744142657,
        0.8750552193514216,
        0.8777809273429441,
        0.8804751881120179,
        0.8826754249352216,
        0.8841567262952585,
        0.8866610344211451,
        0.8881716966591381,
        0.8891778916665336,
        0.890546994677113,
        0.8913248953604478,
        0.8927469088071062,
        0.8934021526593784,
        0.8935911628772305,
        0.8947413036140173,
        0.8949684855919169,
        0.8961071862360195,
        0.8970753807558289,
        0.8974660778303101,
        0.8974459842730745,
        0.8981466127070431,
        0.8986202061396736,
        0.899194768610591,
        0.8995572039561045,
        0.8999041141939703,
        0.9002965945144,
        0.9003734013821084,
        0.9009748078515967,
        0.9014156009827357,
        0.9016200559580655,
        0.9019526617518636,
        0.9021494240084038,
        0.9026823161544345,
        0.9026932822589957,
        0.9028450176377616,
        0.9030232866212464,
        0.9031742902272473,
        0.9031671927969753,
        0.9031967035560693,
        0.9033748265496937,
        0.9033925109129025,
        0.9033457389451107,
        0.9035438491087033,
        0.9036513029242754,
        0.9035785030592545,
        0.903535177647082,
        0.9037150839477982,
        0.9039331333334077,
        0.9039903406614066,
        0.9044017140567262,
        0.904351559108299,
        0.9043799910057307,
        0.9045329038620824,
        0.904675513518416,
        0.9048940568652045,
        0.9048235216128006,
        0.9051357947487061,
        0.9052194272925518,
        0.9053655694684435,
        0.9052582772640976,
        0.9053531985772659,
        0.9056759292985904,
        0.9057132498685582,
        0.9059011928633562,
        0.9057620108116973,
        0.9059487702539939,
        0.90593030867756,
        0.9060386245023887,
        0.9058707782075722,
        0.9058751085970337,
        0.9058279258693168,
        0.9059000199129529,
        0.9058956039535813,
        0.905919872931337,
        0.9060011631112361,
        0.906002919287931,
        0.9062148561810002,
        0.9061785650266261,
        0.9062668387831142,
        0.9063252881713567,
        0.9061462141674929,
        0.9063114836078208,
        0.9062108144304584,
        0.906287580832815,
        0.9065036649685484
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 8.596614432840603,
    "train_mae": 5.626688964119716,
    "train_bias": 0.019273717990149777,
    "train_r2": 0.9291115883997418,
    "val_rmse": 16.803808309580077,
    "val_mae": 9.670588586149792,
    "val_bias": -1.9106915969920881,
    "val_r2": 0.8599639798290775,
    "best_iteration": 280,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276
      ],
      "train_rmse": [
        30.92748348934008,
        25.362131559585887,
        21.152416038034612,
        18.346949480115878,
        16.22439670897784,
        14.588697870993288,
        13.443639918450224,
        12.604101023365867,
        11.905495937545137,
        11.408741522391123,
        11.07842792302882,
        10.821198847894415,
        10.60238216698223,
        10.394887261487922,
        10.242502337063465,
        10.107809314731192,
        9.9925264890059,
        9.910016092291967,
        9.836230863914631,
        9.764094341928937,
        9.697977840533403,
        9.646138408007856,
        9.600247556605058,
        9.54889352043702,
        9.50748488551844,
        9.45986927836332,
        9.418422864415458,
        9.368186480292735,
        9.333685119882633,
        9.305610324968905,
        9.258210648352168,
        9.229096905744035,
        9.193450882262892,
        9.155782572303064,
        9.122223550489744,
        9.091487265470752,
        9.060870095333415,
        9.038592887499435,
        9.011678357441834,
        8.985862707139715,
        8.959252842366517,
        8.935607570933216,
        8.911301416383603,
        8.88814642614724,
        8.866458056051279,
        8.84503776885235,
        8.817920776915978,
        8.797944852075538,
        8.772868007440774,
        8.749335546186842,
        8.724802142509697,
        8.699043822859101,
        8.678681423671522,
        8.655793289676552,
        8.637007756300385,
        8.619860813506182
      ],
      "train_r2": [
        0.08249272726784795,
        0.3829905012063616,
        0.5708191775556088,
        0.6771148451028264,
        0.7475022794982812,
        0.7958481083340023,
        0.8266379271339857,
        0.8476143405292562,
        0.8640386931559862,
        0.8751479062997821,
        0.8822728525891073,
        0.8876763769973295,
        0.8921730658775824,
        0.8963522413571112,
        0.8993688371078559,
        0.9019981151259779,
        0.9042208531244591,
        0.9057960599499673,
        0.9071936324228178,
        0.9085498795286129,
        0.9097841754429723,
        0.9107460744583142,
        0.9115932933941681,
        0.9125365812198087,
        0.9132935040940083,
        0.9141598202785891,
        0.914910353655938,
        0.9158156424094068,
        0.9164345725591658,
        0.916936529463942,
        0.9177805695987836,
        0.9182968576241857,
        0.9189267714324602,
        0.919589772777666,
        0.9201781535335659,
        0.9207151484317565,
        0.9212482603949478,
        0.9216350250635956,
        0.9221010303911022,
        0.922546703664495,
        0.9230047498540638,
        0.9234106254757717,
        0.9238267272924525,
        0.924222067950149,
        0.9245914350976678,
        0.924955350869965,
        0.9254147871740396,
        0.9257523318265916,
        0.9261749859307221,
        0.926570513191388,
        0.9269817328860559,
        0.9274122415533299,
        0.9277516652988813,
        0.9281322413197852,
        0.9284438497678481,
        0.9287276867877791
      ],
      "val_rmse": [
        49.24444648994102,
        41.43808712411984,
        35.56288911204626,
        31.721043393519633,
        28.816302814748916,
        26.368724998949716,
        24.689245113468427,
        23.402529226954943,
        22.13805602370446,
        21.08654343892485,
        20.48711140534143,
        19.938226428634096,
        19.484546973812623,
        19.048342707859657,
        18.74172897226544,
        18.516527175658155,
        18.25988338359277,
        18.061406981617143,
        17.918001814120103,
        17.73864484766741,
        17.663223518248188,
        17.561375257137826,
        17.52475868407228,
        17.47444344102864,
        17.396526995426193,
        17.301070439947207,
        17.30289799944737,
        17.252738666409954,
        17.180264285151434,
        17.15539818528566,
        17.113663477851375,
        17.07151851434906,
        16.981402389013827,
        16.981619272900634,
        16.94888444515055,
        16.920187336180124,
        16.91521684917267,
        16.89313327285406,
        16.906874550791642,
        16.878288913523786,
        16.85854187676969,
        16.850138725156423,
        16.83856868633815,
        16.85508305362634,
        16.87046706512423,
        16.845192698617954,
        16.839367356627854,
        16.849241914345487,
        16.84543590000334,
        16.827586768755655,
        16.818783461027348,
        16.833207230613993,
        16.84996937604317,
        16.814492238639115,
        16.807653982842798,
        16.815239660388745
      ],
      "val_r2": [
        -0.20264885720327008,
        0.14842339712329822,
        0.3727821730170473,
        0.5009785079758573,
        0.5881862521929521,
        0.6551719516029597,
        0.6976987485826139,
        0.7283873987092732,
        0.7569457124220138,
        0.7794865357307956,
        0.7918455113721463,
        0.8028497328917978,
        0.8117196713874831,
        0.8200554430543359,
        0.8258018138246487,
        0.8299630148545967,
        0.8346438616298695,
        0.8382190132910192,
        0.8407778533806322,
        0.8439494874153747,
        0.8452736602938278,
        0.8470528571226423,
        0.8476900010315762,
        0.8485633383956624,
        0.8499108033810261,
        0.8515533945560665,
        0.8515220312558816,
        0.8523816284206445,
        0.8536192382170477,
        0.8540426641244196,
        0.8547519542415398,
        0.8554664635658229,
        0.8569883463431953,
        0.856984693273718,
        0.8575355322840699,
        0.8580175530668381,
        0.8581009585560384,
        0.8584712278569072,
        0.8582408884485192,
        0.8587198473238369,
        0.8590502400973625,
        0.8591907180844799,
        0.8593840232619824,
        0.8591080707547859,
        0.8588507629494531,
        0.8592733695382753,
        0.8593706838305427,
        0.8592057062015388,
        0.8592693060456028,
        0.8595673796422901,
        0.8597142751196959,
        0.8594735541864097,
        0.8591935484240504,
        0.8597858522877553,
        0.8598998759792561,
        0.8597733866799531
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}