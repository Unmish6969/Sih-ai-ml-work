{
  "site_id": 1,
  "timestamp": "20251209_131933",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 8.066054051034126,
    "train_mae": 4.5309974743097765,
    "train_bias": 0.007226081486739653,
    "train_r2": 0.9342314013635784,
    "val_rmse": 9.581424855413593,
    "val_mae": 5.250041669573499,
    "val_bias": 1.4634907030151132,
    "val_r2": 0.9320396627618153,
    "best_iteration": 350,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296,
        301,
        306,
        311,
        316,
        321,
        326,
        331,
        336,
        341,
        346
      ],
      "train_rmse": [
        30.255767539075848,
        24.792174519774033,
        20.953017340374444,
        17.968587655723606,
        15.773643394846513,
        14.27517498717167,
        13.030520231919699,
        12.063066686214379,
        11.380198971510533,
        10.917759177734474,
        10.595547102209062,
        10.336790549694703,
        10.1351339450131,
        9.977431914099249,
        9.835053343371886,
        9.730395364782131,
        9.649865972614924,
        9.578434241111607,
        9.503249697524733,
        9.443886192673954,
        9.395338539757615,
        9.343027011217416,
        9.281107113696075,
        9.239761452714948,
        9.204314357917545,
        9.166581198200971,
        9.128504029923734,
        9.083517091106927,
        9.0475061960786,
        9.014527727597898,
        8.977509996588308,
        8.951726837303676,
        8.922591433258084,
        8.88832482535821,
        8.851176567825926,
        8.815955343739942,
        8.789382430295115,
        8.752616440863,
        8.726762479900756,
        8.700359574399833,
        8.67125758874941,
        8.646673658645417,
        8.626506255425099,
        8.60665522162124,
        8.58277184229871,
        8.55684383448313,
        8.526777356275401,
        8.508274014987428,
        8.487163295783512,
        8.468370951420114,
        8.44402127983679,
        8.422582228007226,
        8.40328987973725,
        8.379904080909766,
        8.358232231762289,
        8.33679237363672,
        8.31704152330999,
        8.29904283732534,
        8.280526090863964,
        8.264159633311845,
        8.241589305617904,
        8.222221678236869,
        8.206699549138916,
        8.191407097617974,
        8.175015044023038,
        8.157912128847727,
        8.131265361146877,
        8.113358134687772,
        8.098186776731913,
        8.078661669496952
      ],
      "train_r2": [
        0.07463582520889833,
        0.3786653506403638,
        0.5561977729667359,
        0.6736194893480301,
        0.7484870397177442,
        0.7940037978343741,
        0.8283594718682767,
        0.8529002990750334,
        0.8690830005088158,
        0.8795065738686452,
        0.8865137866426954,
        0.8919890551300378,
        0.8961622383663962,
        0.8993685157964928,
        0.9022200587493366,
        0.9042900022288882,
        0.9058676512146087,
        0.907256095329948,
        0.9087063410690445,
        0.9098433383767447,
        0.9107678824046336,
        0.9117587724140089,
        0.9129245149728489,
        0.9136985981361709,
        0.9143594952841823,
        0.9150602238695559,
        0.9157644228836642,
        0.916592633741621,
        0.9172526468540756,
        0.9178547812956469,
        0.918528046981895,
        0.9189953453539467,
        0.9195217829100754,
        0.9201387382240779,
        0.9208048945999747,
        0.9214339180403138,
        0.9219068295316695,
        0.9225587906096577,
        0.9230156151420023,
        0.9234807444726566,
        0.9239917895442871,
        0.9244221611951347,
        0.924774303830842,
        0.9251201193018687,
        0.9255351244749506,
        0.9259843522092983,
        0.926503581072096,
        0.9268222134754289,
        0.9271849002385318,
        0.9275069987909056,
        0.9279232873570687,
        0.9282888228414203,
        0.9286169627171373,
        0.9290137183995297,
        0.9293804086826429,
        0.9297422392915519,
        0.930074742897151,
        0.930377062160693,
        0.9306873996534559,
        0.9309611215514626,
        0.9313377121137116,
        0.931660043892508,
        0.9319178283154588,
        0.9321713220043457,
        0.9324425181085967,
        0.93272489587573,
        0.9331636690055218,
        0.9334577278919968,
        0.9337063531183302,
        0.9340256419126979
      ],
      "val_rmse": [
        35.500145802131776,
        29.06767573472721,
        24.544160170568183,
        21.012191987206286,
        18.427089077508384,
        16.55640170799497,
        15.032596779848285,
        13.835899768091462,
        12.970244016843035,
        12.360893175799657,
        11.83878162974748,
        11.544614456682924,
        11.295644147292059,
        11.14254194073679,
        10.995693170454922,
        10.833747298488507,
        10.673794846151013,
        10.522637658541731,
        10.418763865964195,
        10.36317243115247,
        10.25905988709859,
        10.193684184744109,
        10.178047060045374,
        10.185043729646582,
        10.171104364221733,
        10.09799387275314,
        10.036764393505866,
        10.015655095710777,
        9.939430199881077,
        9.9079148808292,
        9.93136750967915,
        9.901395392035527,
        9.86377786893738,
        9.866116005086143,
        9.86007230944112,
        9.82089685076224,
        9.788670748605943,
        9.773382941267265,
        9.757937473543603,
        9.751269509675932,
        9.749694855264273,
        9.735752325183261,
        9.729320959864735,
        9.720915061838577,
        9.716520995943014,
        9.697606443537598,
        9.695239374011612,
        9.688334306477909,
        9.685513055560548,
        9.669943306513733,
        9.673012759997842,
        9.659230492666609,
        9.651427843180763,
        9.636635115151057,
        9.651894154392785,
        9.641284763747352,
        9.652982912512945,
        9.647322297196713,
        9.639046268044497,
        9.641215573293701,
        9.635316447767671,
        9.631252288866362,
        9.62240134785756,
        9.615280405878332,
        9.610228180537149,
        9.61408916600913,
        9.609060682890888,
        9.608787218411253,
        9.61118955829274,
        9.584779535681644
      ],
      "val_r2": [
        0.06705594197644349,
        0.37451637704980156,
        0.5540443379256204,
        0.6731578564813772,
        0.7486326885906275,
        0.7970788850897341,
        0.8327125556341014,
        0.858286852536829,
        0.8754649432185335,
        0.8868915539198663,
        0.8962449248327178,
        0.9013370271632108,
        0.9055466569650437,
        0.9080897633303318,
        0.9104963895225753,
        0.9131134141874016,
        0.9156601096529133,
        0.9180319579325278,
        0.9196422589303183,
        0.9204975013273257,
        0.9220869044554777,
        0.9230767405381699,
        0.9233125602840698,
        0.9232070899326359,
        0.9234171453732826,
        0.9245141525289085,
        0.925426798446012,
        0.9257401529183167,
        0.926866172018929,
        0.9273292130306907,
        0.9269847736343974,
        0.927424817507033,
        0.9279752272989956,
        0.9279410773644918,
        0.9280293327242919,
        0.9286000958404104,
        0.9290679075910411,
        0.9292892960498872,
        0.9295126162449502,
        0.9296089166655013,
        0.9296316486144727,
        0.9298327649265907,
        0.9299254382103622,
        0.9300464713564711,
        0.9301096981085211,
        0.9303815355501487,
        0.9304155174682146,
        0.930514600003224,
        0.930555062522249,
        0.9307781526528479,
        0.930734200593228,
        0.9309314420721349,
        0.9310429830653186,
        0.9312542016932384,
        0.9310363195524237,
        0.9311878463909188,
        0.9310207601190611,
        0.9311016367680394,
        0.9312197960391387,
        0.9311888340449831,
        0.9312730146167261,
        0.931330980223385,
        0.9314571333243978,
        0.9315585444288768,
        0.9316304488972585,
        0.9315755018418157,
        0.9316470596249017,
        0.9316509500853553,
        0.9316167692526097,
        0.9319920654331816
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 7.417248595265445,
    "train_mae": 4.576162321444542,
    "train_bias": -0.01150865326537653,
    "train_r2": 0.9137452124358709,
    "val_rmse": 19.68526451772907,
    "val_mae": 9.660569374762387,
    "val_bias": -4.677808529172078,
    "val_r2": 0.7694171268869973,
    "best_iteration": 140,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136
      ],
      "train_rmse": [
        24.193466017250227,
        19.851368666625874,
        16.54486048756856,
        14.365627763734384,
        12.752336045410278,
        11.489915856412885,
        10.56136113169614,
        9.91997880285797,
        9.380645889728916,
        9.008148758494174,
        8.738030092112712,
        8.54429308091082,
        8.37569675665559,
        8.225740419585996,
        8.113719261642958,
        8.01848685369608,
        7.93644800200141,
        7.861453124924151,
        7.805429476283681,
        7.750418156773517,
        7.703560842683759,
        7.657815693510337,
        7.6198331593179764,
        7.584868568825085,
        7.548458585477218,
        7.512213267251164,
        7.4753034428816925,
        7.440829814280487
      ],
      "train_r2": [
        0.08231481240655958,
        0.38215654612044814,
        0.5708355314054214,
        0.6764460114597934,
        0.7450370725087742,
        0.7930186399119502,
        0.8251211350248618,
        0.8457166613918479,
        0.8620368746671659,
        0.872776119295876,
        0.8802916039249974,
        0.8855410352376211,
        0.8900134877667611,
        0.8939165731298123,
        0.8967862651396881,
        0.8991949282854419,
        0.901247092679187,
        0.9031045914238488,
        0.9044806962519567,
        0.9058223587564016,
        0.9069576708090066,
        0.9080593945869967,
        0.9089691779719137,
        0.9098026746840004,
        0.9106665527374246,
        0.9115223951465887,
        0.912389694852009,
        0.9131958911377487
      ],
      "val_rmse": [
        49.71215707923008,
        42.441306107716905,
        36.55007932650103,
        32.68720582143732,
        29.636754117903507,
        27.336255848536855,
        25.517600023649532,
        24.245969897381016,
        23.18638297446464,
        22.388349826876627,
        21.873874552206686,
        21.44700396959273,
        21.06944227569279,
        20.66230052591482,
        20.506173986882697,
        20.381937705524436,
        20.20093414946482,
        20.091649121606096,
        20.034204724504445,
        20.085682285084523,
        20.036648416803875,
        19.987386417820872,
        19.997244605605832,
        19.98797291570109,
        19.9240926636806,
        19.89864135196743,
        19.924352879760733,
        19.82633867584043
      ],
      "val_r2": [
        -0.4705159951602371,
        -0.07182039730549516,
        0.20508409949253714,
        0.36422985260492224,
        0.477356190786824,
        0.5553455966420053,
        0.612542396446625,
        0.650196895371967,
        0.6801027208408583,
        0.7017443324339648,
        0.7152944255457672,
        0.7262981072290098,
        0.7358499995713403,
        0.7459601285784911,
        0.7497847287797474,
        0.7528073938984544,
        0.7571783296254841,
        0.7597985047298053,
        0.7611700700613344,
        0.7599411540686344,
        0.7611118034654872,
        0.762285018001499,
        0.7620504683911751,
        0.7622710670650792,
        0.7637881710943418,
        0.7643912661658749,
        0.7637820010249066,
        0.7661003469687331
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}