{
  "site_id": 6,
  "timestamp": "20251209_131933",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 7.353261517902251,
    "train_mae": 4.056698633468677,
    "train_bias": -0.005468667142818434,
    "train_r2": 0.9223436996996669,
    "val_rmse": 8.96360274105755,
    "val_mae": 4.818438224015826,
    "val_bias": 0.6285565861113819,
    "val_r2": 0.883118191176487,
    "best_iteration": 340,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296,
        301,
        306,
        311,
        316,
        321,
        326,
        331,
        336
      ],
      "train_rmse": [
        25.4345474072814,
        21.005685738930104,
        17.879790303806413,
        15.474849040750515,
        13.68157127427658,
        12.486006041671015,
        11.467592456744743,
        10.643609350125598,
        10.08571805992175,
        9.700862302228991,
        9.445463881389532,
        9.226772205113942,
        9.059278850792063,
        8.933100886601936,
        8.82810666688407,
        8.740574990087907,
        8.666232406738354,
        8.59676622823836,
        8.538595419172513,
        8.484248255208708,
        8.433128715893709,
        8.395002380801666,
        8.351188894051862,
        8.307688796510684,
        8.27550329132407,
        8.241718239595263,
        8.212165240025033,
        8.176877100292886,
        8.152407037333598,
        8.12035539279252,
        8.090546933991247,
        8.05461390145934,
        8.02738057914099,
        8.008119516959034,
        7.9812883514937925,
        7.958569012033595,
        7.930435709657214,
        7.904226834184988,
        7.881892716423732,
        7.859342949803019,
        7.836074131839338,
        7.81602490520797,
        7.796687080351183,
        7.7789906111179485,
        7.76009188463067,
        7.738464242459237,
        7.719873464379442,
        7.699411586219486,
        7.683634716754759,
        7.6669094064105545,
        7.646239999375285,
        7.616906463508611,
        7.597831423240422,
        7.579800826833637,
        7.5658060690994615,
        7.547984309015749,
        7.5299798345545295,
        7.515638847943924,
        7.503374229975426,
        7.490108742602572,
        7.477731758300897,
        7.458198325847427,
        7.44056019520626,
        7.421485525312317,
        7.405589096107152,
        7.393477949277779,
        7.378242150239251,
        7.363666325423017
      ],
      "train_r2": [
        0.07089520731792787,
        0.3662902341205061,
        0.5408638223459229,
        0.656070431745875,
        0.7311632560212271,
        0.7760950196421461,
        0.8111307860360208,
        0.8372973880218311,
        0.8539066931909624,
        0.8648433706399257,
        0.8718663328798522,
        0.8777310255102985,
        0.8821298251459168,
        0.8853903596230867,
        0.8880686308277339,
        0.8902772513024207,
        0.8921357978591786,
        0.8938580880037815,
        0.8952896661211592,
        0.8966183622482934,
        0.897860405245227,
        0.898781867647042,
        0.8998356248011529,
        0.9008763897144765,
        0.9016429479147225,
        0.9024444012750436,
        0.9031427730152851,
        0.9039733865698721,
        0.9045472636832071,
        0.9052963438078845,
        0.9059903500609479,
        0.9068235570776727,
        0.9074525665812744,
        0.9078961541985515,
        0.9085123072317329,
        0.9090324191476624,
        0.9096744177467873,
        0.9102704556415538,
        0.9107768173558061,
        0.9112866146718628,
        0.9118111368490955,
        0.9122618361500935,
        0.9126954494983476,
        0.9130913173638298,
        0.9135130862942843,
        0.9139944984901476,
        0.914407238936741,
        0.9148603726800365,
        0.9152089345299322,
        0.9155776697584945,
        0.9160322485920049,
        0.9166752695971792,
        0.9170920877365768,
        0.9174851223421125,
        0.9177895392270348,
        0.9181763874975927,
        0.9185662754607533,
        0.9188761641702721,
        0.9191407168059307,
        0.9194263721896851,
        0.9196924389729345,
        0.9201114519845893,
        0.9204888671163868,
        0.9208960151073027,
        0.9212345252811368,
        0.9214919417208339,
        0.9218151726999844,
        0.9221237781012137
      ],
      "val_rmse": [
        25.33561977284696,
        20.83517758757785,
        17.967462414873257,
        15.71659987468495,
        14.038779547770494,
        12.992143267425925,
        12.064718316377176,
        11.282967231080072,
        10.808222546518294,
        10.41204695075432,
        10.160168309765515,
        9.954301568481844,
        9.799987765231382,
        9.711862028713568,
        9.634821719795626,
        9.568668609755019,
        9.492361077913245,
        9.444506782169258,
        9.421266594871982,
        9.38417837585155,
        9.316438334685744,
        9.271821258912361,
        9.247233887369434,
        9.211948513847418,
        9.203675953871034,
        9.185899623978004,
        9.189476732801687,
        9.156902857597041,
        9.140427734986371,
        9.136901354991316,
        9.109804861174302,
        9.071668548130452,
        9.053417684696363,
        9.063001879924753,
        9.06038721767986,
        9.04928238908687,
        9.02493931114897,
        9.010998806114198,
        9.013209424973807,
        9.014059317106824,
        9.006000085681613,
        8.99551524945218,
        9.0015358491624,
        9.004098544015262,
        9.003441260999356,
        8.995293973522227,
        9.002619904367451,
        9.0089788323528,
        9.004462661286585,
        9.002138588408028,
        8.999283570976045,
        9.003954624771707,
        9.018422426085518,
        9.021557839116237,
        9.01562739785735,
        9.01632333287263,
        9.018383881766196,
        9.012548625671684,
        9.002748066294007,
        8.98705348718125,
        8.981748788958559,
        8.980964508732084,
        8.980481592823232,
        8.986969719215894,
        8.976031252074065,
        8.970692495570493,
        8.969177698132066,
        8.96493958961886
      ],
      "val_r2": [
        0.06621952690664934,
        0.3684959567807149,
        0.5303706696817015,
        0.6406655002298589,
        0.7132915907450033,
        0.7544480855470532,
        0.788253570636394,
        0.8148053756929167,
        0.830062087403718,
        0.842291915069681,
        0.8498298801955267,
        0.8558537628559902,
        0.860288296028904,
        0.862789694765679,
        0.8649579293660677,
        0.8668059727397899,
        0.8689218744365887,
        0.8702401639592046,
        0.8708779807668376,
        0.8718925958530901,
        0.8737354166623539,
        0.8749419006280219,
        0.8756042889259383,
        0.8765518100542067,
        0.8767734296187516,
        0.8772489789002605,
        0.8771533585967343,
        0.8780227223431438,
        0.8784612511352705,
        0.8785550124229508,
        0.8792742614790694,
        0.8802829324018167,
        0.8807641541199611,
        0.8805115678472808,
        0.8805805023636297,
        0.8808730550625697,
        0.881513109358911,
        0.8818788716816222,
        0.8818209085569424,
        0.8817986203328944,
        0.882009887285403,
        0.8822844568775092,
        0.8821268327028401,
        0.8820597072781214,
        0.8820769255085756,
        0.8822902480512633,
        0.882098440055847,
        0.8819318235999686,
        0.8820501682963646,
        0.882111046693928,
        0.882185811515918,
        0.8820634775038642,
        0.881684165724366,
        0.8816018822654759,
        0.8817574922632307,
        0.881739236788857,
        0.8816851770749851,
        0.8818382364131598,
        0.8820950831222468,
        0.8825058143928651,
        0.8826444776938961,
        0.8826649716086907,
        0.8826775897252432,
        0.882508004699847,
        0.8827938408029963,
        0.882933222906286,
        0.8829727555247349,
        0.8830833246313183
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 5.443810844967736,
    "train_mae": 3.529634027483708,
    "train_bias": -0.0005015863157215706,
    "train_r2": 0.902517447573969,
    "val_rmse": 8.952911169916133,
    "val_mae": 5.485958571004685,
    "val_bias": -1.4932139614532731,
    "val_r2": 0.8203371786653773,
    "best_iteration": 330,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296,
        301,
        306,
        311,
        316,
        321,
        326
      ],
      "train_rmse": [
        16.750375750122203,
        13.989754588959878,
        11.89913493085267,
        10.540161751572485,
        9.515858736353222,
        8.7226409188523,
        8.153276098067238,
        7.742276450472222,
        7.391874177301464,
        7.141406101092203,
        6.9637619308675305,
        6.823299829807099,
        6.703928661694046,
        6.59805086866687,
        6.511630671202094,
        6.437684719695222,
        6.383837297313023,
        6.337589552093896,
        6.2942850321270685,
        6.254690455765801,
        6.215724827376136,
        6.1849517703562285,
        6.152286008507153,
        6.124374741438016,
        6.099654523984502,
        6.069643208770911,
        6.047736666618918,
        6.022305922567785,
        6.000948041071797,
        5.982387674190916,
        5.958212835282514,
        5.931842640645319,
        5.910825421449656,
        5.892516547623683,
        5.87581977636371,
        5.855807677049117,
        5.834915352377482,
        5.819441207072112,
        5.806659033679215,
        5.788319632877151,
        5.775208720832448,
        5.758056167727607,
        5.738681797484729,
        5.725341465395881,
        5.712815265750234,
        5.697536060455018,
        5.680131731680939,
        5.667979355120204,
        5.651905937585769,
        5.6387361021840094,
        5.6247648751878145,
        5.610449113054481,
        5.598488248621592,
        5.584952427981378,
        5.571295152080652,
        5.558479713490772,
        5.5464712834314485,
        5.534740712297223,
        5.522731331366586,
        5.512376410867206,
        5.49964677593496,
        5.4889336424272335,
        5.480061428949371,
        5.471900714388987,
        5.459682119035402,
        5.45115918665347
      ],
      "train_r2": [
        0.07706748493012316,
        0.356214736580744,
        0.5342513362193297,
        0.634560582072801,
        0.7021368269313271,
        0.7497253700306745,
        0.7813320479036339,
        0.8028221222362617,
        0.8202661113152212,
        0.8322400455432314,
        0.840482376767954,
        0.8468525570072732,
        0.8521642028275008,
        0.8567969862119655,
        0.8605237188368581,
        0.8636735120965394,
        0.8659445550088161,
        0.8678798502464333,
        0.8696792260367946,
        0.8713136503371611,
        0.8729120428620247,
        0.8741673120310192,
        0.8754929702405693,
        0.8766201174657411,
        0.8776141200346497,
        0.8788154751004945,
        0.8796886543243859,
        0.8806983458436952,
        0.8815430430002692,
        0.8822746622471197,
        0.8832241964140357,
        0.8842555748698849,
        0.885074314192617,
        0.8857851797306792,
        0.8864315307054011,
        0.8872038053064171,
        0.8880072370318342,
        0.8886004570675962,
        0.8890892890436763,
        0.8897887700641948,
        0.8902874755121986,
        0.8909382070844832,
        0.8916709018128882,
        0.8921739673174948,
        0.8926452659846383,
        0.8932187490816385,
        0.8938701245024419,
        0.8943237585424512,
        0.8949222681020926,
        0.8954113930615271,
        0.8959290342063355,
        0.8964581085005199,
        0.8968991179034479,
        0.8973970623216431,
        0.8978982530931433,
        0.8983674343911512,
        0.8988060900320011,
        0.8992336797564452,
        0.8996704945214082,
        0.900046370165914,
        0.9005074794910206,
        0.9008947183636402,
        0.901214843416672,
        0.9015088391046637,
        0.9019482038148847,
        0.9022540958163846
      ],
      "val_rmse": [
        24.937611885170103,
        20.840161402170178,
        17.787426650158388,
        15.83998340979615,
        14.349022636453135,
        13.185787551227518,
        12.342548226918655,
        11.746276123357921,
        11.196604917492303,
        10.800909313042716,
        10.528732573555393,
        10.317891770603392,
        10.085364197528888,
        9.913462781990761,
        9.781473679324,
        9.65617054647543,
        9.569787462899944,
        9.511887710297104,
        9.461989744018023,
        9.428558388608725,
        9.368560021446042,
        9.309804240025368,
        9.273668101478776,
        9.249716920301141,
        9.224495398021558,
        9.218121886429808,
        9.200630218443008,
        9.189851402532147,
        9.169244100589585,
        9.159629824114992,
        9.12689758137085,
        9.112327149018366,
        9.105258584147943,
        9.083717221067467,
        9.080475694626598,
        9.064769548926474,
        9.063573947016986,
        9.066355307823743,
        9.061284500388128,
        9.050441666057493,
        9.047336448900175,
        9.034107062218252,
        9.032204009323808,
        9.016317992756864,
        9.018449368119667,
        9.019751042377301,
        9.025592606585645,
        9.0283801578583,
        9.030188109254084,
        9.01533114796355,
        9.015385459140258,
        9.016035557080224,
        9.003615582809598,
        8.998033565644054,
        9.006947105035328,
        9.004394597518386,
        9.002597816773072,
        9.001784706460858,
        9.001384935589195,
        9.001178581784446,
        8.996460462379087,
        8.982495206655491,
        8.98529632613525,
        8.975769544203418,
        8.964020773865652,
        8.960860415374515
      ],
      "val_r2": [
        -0.3939249366110893,
        0.026509269221456244,
        0.2908209316365028,
        0.4376080324685001,
        0.5384972366331164,
        0.6102897642952021,
        0.6585403977736486,
        0.690735496464575,
        0.7190025541408072,
        0.7385128788628448,
        0.7515254835215223,
        0.7613773851412021,
        0.7720115552021098,
        0.7797172825879306,
        0.7855439781154872,
        0.7910032562714024,
        0.7947258561309687,
        0.7972022679668409,
        0.7993243814311437,
        0.8007399411916893,
        0.8032678440033826,
        0.8057277534006517,
        0.8072329674825033,
        0.8082274037487924,
        0.8092718038142663,
        0.8095352737092889,
        0.8102574131953011,
        0.8107017311078989,
        0.8115497432680797,
        0.8119447295886862,
        0.8132863716612045,
        0.8138820454325627,
        0.8141706822547423,
        0.8150489179616657,
        0.8151808940762901,
        0.8158196899889334,
        0.8158682718766568,
        0.8157552446414401,
        0.8159612829833054,
        0.8164014650346153,
        0.8165274291673262,
        0.8170635991221878,
        0.817140662848983,
        0.8177833303204746,
        0.8176971714195633,
        0.8176445424110519,
        0.8174082640356587,
        0.8172954598248117,
        0.8172222785904447,
        0.8178232157218455,
        0.8178210207352912,
        0.817794745996447,
        0.8182963912868646,
        0.8185216248592382,
        0.8181618982931926,
        0.8182649470506816,
        0.8183374684091931,
        0.8183702822725161,
        0.818386414330908,
        0.818394741099532,
        0.818585074115597,
        0.8191478597700277,
        0.8190350475883161,
        0.8194185852307045,
        0.819891017377274,
        0.820017993569467
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}