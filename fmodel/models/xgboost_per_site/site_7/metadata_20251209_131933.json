{
  "site_id": 7,
  "timestamp": "20251209_131933",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 9.524921285851264,
    "train_mae": 6.002234515919525,
    "train_bias": -0.005803829481393686,
    "train_r2": 0.9339917903643452,
    "val_rmse": 10.740287926602303,
    "val_mae": 6.548180201906499,
    "val_bias": 1.5028147686109312,
    "val_r2": 0.9293821306048642,
    "best_iteration": 320,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296,
        301,
        306,
        311,
        316
      ],
      "train_rmse": [
        35.63598895892336,
        29.084597700400607,
        24.44824126177778,
        20.871316468313747,
        18.23567514682146,
        16.449122020409682,
        14.975060647929773,
        13.775139767921363,
        12.954126446158911,
        12.381033338223943,
        12.019205025526759,
        11.720722035115045,
        11.483999808266576,
        11.30963100968318,
        11.172176614946633,
        11.059370390652372,
        10.973230523749471,
        10.889986317367166,
        10.820443272945585,
        10.757210745247091,
        10.685085416278355,
        10.628753078602882,
        10.578635884836444,
        10.532802830140051,
        10.499871416315766,
        10.46198276007155,
        10.42771383071256,
        10.392583955810531,
        10.353960687220049,
        10.32396661216919,
        10.290116197585393,
        10.252778110809727,
        10.220816631435714,
        10.194181784107139,
        10.168594468736803,
        10.136916189139177,
        10.10904783407641,
        10.085828322857454,
        10.064059808727974,
        10.032674800256181,
        10.007805496610722,
        9.984554128050107,
        9.955702276902985,
        9.929893895910824,
        9.911851736823284,
        9.888031993440318,
        9.861268009641687,
        9.841860977577165,
        9.819992580559049,
        9.800496917615531,
        9.784264985849696,
        9.762795728915027,
        9.741029521708315,
        9.715618482933355,
        9.697249418557847,
        9.680327524247993,
        9.666309715325177,
        9.65000056488346,
        9.626708550544663,
        9.606899290084009,
        9.588791908660058,
        9.572258291572636,
        9.554183174037629,
        9.537085909792648
      ],
      "train_r2": [
        0.07604080009855385,
        0.38453794203531877,
        0.565119025739371,
        0.6830616087006426,
        0.7580537714571018,
        0.8031385828407326,
        0.8368405087181252,
        0.8619402156025195,
        0.8779068140519302,
        0.8884707071084471,
        0.8948942078500323,
        0.9000497474862658,
        0.9040463464105915,
        0.9069380744611097,
        0.9091864301615866,
        0.9110110731837016,
        0.912391918804791,
        0.9137160872733475,
        0.9148145802355543,
        0.9158072845990565,
        0.916932496352401,
        0.9178060601089886,
        0.9185793620671207,
        0.9192833606692246,
        0.9197873020651549,
        0.9203651506593268,
        0.9208859948579253,
        0.9214181505388871,
        0.9220011524277909,
        0.9224524028700963,
        0.92296009820305,
        0.9235181684320746,
        0.9239942661920812,
        0.9243898829913687,
        0.9247689682302824,
        0.9252369734170472,
        0.9256474845679887,
        0.9259886534641543,
        0.926307790045246,
        0.9267666951728216,
        0.9271293111314958,
        0.9274675221391094,
        0.9278861032093411,
        0.928259503403743,
        0.9285199649103635,
        0.9288631077027352,
        0.9292476796736928,
        0.9295258875919565,
        0.9298387234806261,
        0.9301170297620865,
        0.9303483233894455,
        0.9306536563144051,
        0.9309625277303485,
        0.931322248574272,
        0.9315816975127744,
        0.9318202717867937,
        0.9320175870980798,
        0.9322467955745498,
        0.9325734699770445,
        0.9328506769700456,
        0.9331035686651268,
        0.9333340641097643,
        0.9335855945022049,
        0.9338230797217888
      ],
      "val_rmse": [
        39.06386308819461,
        31.984234739941982,
        27.03089056233526,
        23.164310533213797,
        20.237366322918774,
        18.177932976658184,
        16.599961902898897,
        15.271959576391312,
        14.390651431146907,
        13.695708345552562,
        13.17325822439555,
        12.84154769526652,
        12.580309500776272,
        12.387285787807338,
        12.149929650439107,
        12.004850458463284,
        11.802020251627049,
        11.704835553665033,
        11.607358307878258,
        11.513642268860009,
        11.44319663513663,
        11.389123938462978,
        11.351783682964907,
        11.284584635848711,
        11.254007195321766,
        11.204889256820298,
        11.182615118101308,
        11.150446552710646,
        11.127708692857345,
        11.114830716020357,
        11.075112409884706,
        11.048094711914283,
        11.033645336544199,
        11.00817674741147,
        10.9814400473836,
        10.951103901730967,
        10.937950021213316,
        10.919100827951574,
        10.903345722179848,
        10.893768182967703,
        10.867959337900428,
        10.848160929920144,
        10.83318416588581,
        10.837421787287585,
        10.84309184863555,
        10.836788090953082,
        10.803293833684625,
        10.802653911736751,
        10.794766507393167,
        10.79289146858796,
        10.791246534216386,
        10.767890261455529,
        10.74781460722198,
        10.756044568109465,
        10.753169215443885,
        10.738624597693743,
        10.745061913987003,
        10.748523619385798,
        10.74776233283467,
        10.746155431007093,
        10.740254857781052,
        10.745588705425416,
        10.739105840636029,
        10.739231544459631
      ],
      "val_r2": [
        0.0658144605414841,
        0.3737399757602421,
        0.5526952906174176,
        0.6715104798616116,
        0.7492789786850375,
        0.7977112374361175,
        0.8313070454145789,
        0.8572183837299856,
        0.8732220660776272,
        0.8851709531052783,
        0.8937646208638885,
        0.8990474018912231,
        0.9031130212014469,
        0.9060633481319934,
        0.9096287501341107,
        0.9117740646852803,
        0.9147301550715669,
        0.9161286960454883,
        0.9175198306627779,
        0.9188463186189735,
        0.9198363499281266,
        0.9205921568143676,
        0.9211119945968161,
        0.9220432153126592,
        0.9224651164255022,
        0.9231404390598675,
        0.9234457127425704,
        0.9238855203332108,
        0.924195627335964,
        0.9243709809699182,
        0.9249105284519613,
        0.9252764425899491,
        0.9254717708711626,
        0.9258154357426422,
        0.9261753576045187,
        0.9265826742620309,
        0.9267589382719585,
        0.9270111510536442,
        0.9272216294488045,
        0.9273494308732951,
        0.9276932616124058,
        0.9279564673000125,
        0.9281552538385802,
        0.9280990357635694,
        0.9280237799445045,
        0.9281074440448498,
        0.9285511671203744,
        0.9285596312652686,
        0.9286639155219236,
        0.9286886953649551,
        0.9287104306853634,
        0.9290186910364615,
        0.9292831194063242,
        0.92917477738332,
        0.9292126389357493,
        0.9294040018338223,
        0.9293193382950671,
        0.9292737889918818,
        0.9292838072992123,
        0.9293049513254836,
        0.929382565462127,
        0.9293124076918805,
        0.929397674284737,
        0.929396021440567
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 7.246747824852745,
    "train_mae": 4.443041896241976,
    "train_bias": 0.002072722748109953,
    "train_r2": 0.8934136138659691,
    "val_rmse": 12.210657100484248,
    "val_mae": 7.450833090146383,
    "val_bias": -1.7050681004485462,
    "val_r2": 0.8167182681757152,
    "best_iteration": 180,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176
      ],
      "train_rmse": [
        21.29231518811586,
        17.676536934435294,
        14.960284894465689,
        13.227078963172797,
        11.920233073945386,
        10.891871364574435,
        10.170922749505111,
        9.65070340038814,
        9.20846758254882,
        8.872765055985813,
        8.654391668416544,
        8.471217735594339,
        8.326007038500912,
        8.194488756739199,
        8.086948279163197,
        7.989755557245776,
        7.913545244838419,
        7.850873933778103,
        7.7972649025420315,
        7.754876648903658,
        7.7007238198779975,
        7.656481295647979,
        7.621924611991073,
        7.588995547533376,
        7.548556490815977,
        7.518437710682813,
        7.4856076232307185,
        7.4526596809069146,
        7.428992912966832,
        7.404103719189907,
        7.373933655175995,
        7.3532640414388615,
        7.334272937479586,
        7.309334359720718,
        7.289754470568476,
        7.270633274928403
      ],
      "train_r2": [
        0.07984452923667351,
        0.36582398909944547,
        0.5457497574189406,
        0.6449060015390209,
        0.7116068543432249,
        0.7592199795610143,
        0.7900401995506745,
        0.8109688498799725,
        0.8278963159558915,
        0.840215957840246,
        0.8479842691467324,
        0.8543511268601196,
        0.8593016555749761,
        0.8637115139582798,
        0.867265208822614,
        0.8704365735823125,
        0.8728964679335139,
        0.8749016887027317,
        0.8766043022698469,
        0.8779422870232982,
        0.879641009652381,
        0.8810200199908492,
        0.882091602314541,
        0.8831082028141686,
        0.884350633318223,
        0.8852716753275353,
        0.8862714355353503,
        0.8872703860231369,
        0.8879852206045448,
        0.8887345246800806,
        0.8896394410236986,
        0.890257269494267,
        0.8908233974798287,
        0.8915645971129686,
        0.8921447619719473,
        0.8927098335000282
      ],
      "val_rmse": [
        32.53178702277736,
        27.29442973918611,
        23.3888286338785,
        20.88958666745043,
        18.991492528011822,
        17.49097071683373,
        16.40619569039341,
        15.569276309048503,
        14.887675821968374,
        14.374506882008713,
        13.972550579738835,
        13.658227075110947,
        13.384967549646799,
        13.156152959107434,
        12.990552190467994,
        12.807776679988278,
        12.74069672508601,
        12.662317412075717,
        12.623419479510318,
        12.583884452784238,
        12.53300954547082,
        12.477231860771203,
        12.421498781482386,
        12.398101458291297,
        12.367450966383196,
        12.38314542174259,
        12.334038534933482,
        12.319883478251944,
        12.31851826933621,
        12.309510393706525,
        12.27607131465048,
        12.264157854824022,
        12.242315393112897,
        12.230811204708424,
        12.21948559707237,
        12.211060424353121
      ],
      "val_r2": [
        -0.30093904867058874,
        0.08422420843757794,
        0.32755301223542777,
        0.46358513738519425,
        0.5566371474355138,
        0.623929788705027,
        0.6691303869076877,
        0.702026281244917,
        0.7275449163293808,
        0.7460039171327454,
        0.7600103626128742,
        0.7706864243099825,
        0.7797703675566101,
        0.7872356127531975,
        0.7925581710446383,
        0.7983544688257865,
        0.8004611500545933,
        0.8029086788567417,
        0.8041177260199796,
        0.8053427639714441,
        0.8069135270066267,
        0.8086283506998007,
        0.8103341634429729,
        0.8110480053907627,
        0.8119811019274062,
        0.8115036023122246,
        0.8129956493023363,
        0.8134246309760602,
        0.8134659788093912,
        0.813738683834299,
        0.8147492759487491,
        0.8151086590296488,
        0.8157666554148777,
        0.8161127434227683,
        0.8164531412317074,
        0.816706160208486
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}