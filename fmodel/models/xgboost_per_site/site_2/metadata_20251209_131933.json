{
  "site_id": 2,
  "timestamp": "20251209_131933",
  "n_features": 58,
  "features": [
    "year",
    "month",
    "day",
    "hour",
    "O3_forecast",
    "NO2_forecast",
    "T_forecast",
    "q_forecast",
    "u_forecast",
    "v_forecast",
    "w_forecast",
    "blh_forecast",
    "NO2_forecast_per_blh",
    "O3_forecast_per_blh",
    "blh_delta_1h",
    "blh_rel_change",
    "sin_hour",
    "cos_hour",
    "wind_speed",
    "wind_dir_deg",
    "wind_sector",
    "SZA_deg",
    "cosSZA",
    "solar_elevation",
    "sunset_flag",
    "solar_declination_deg",
    "hour_angle_deg",
    "solar_time_hr",
    "EoT_min",
    "NO2_target_lag1",
    "NO2_target_lag2",
    "NO2_target_lag3",
    "NO2_target_lag6",
    "NO2_target_lag12",
    "O3_target_lag1",
    "O3_target_lag2",
    "O3_target_lag3",
    "O3_target_lag6",
    "O3_target_lag12",
    "NO2_roll3",
    "NO2_roll6",
    "NO2_roll12",
    "O3_roll3",
    "O3_roll6",
    "O3_roll12",
    "temp_roll3",
    "rh_roll3",
    "ws_roll3",
    "NO2_satellite_filled_smooth",
    "HCHO_satellite_filled_smooth",
    "ratio_satellite_smooth",
    "dayofweek",
    "season",
    "is_weekend",
    "hour_sin",
    "hour_cos",
    "month_sin",
    "month_cos"
  ],
  "O3_metrics": {
    "train_rmse": 6.1859210339801125,
    "train_mae": 3.9592055137689575,
    "train_bias": -0.0005345862252938288,
    "train_r2": 0.9578363366076963,
    "val_rmse": 8.998562103686195,
    "val_mae": 4.7584710293955075,
    "val_bias": 1.064488891921656,
    "val_r2": 0.9171169658371512,
    "best_iteration": 560,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296,
        301,
        306,
        311,
        316,
        321,
        326,
        331,
        336,
        341,
        346,
        351,
        356,
        361,
        366,
        371,
        376,
        381,
        386,
        391,
        396,
        401,
        406,
        411,
        416,
        421,
        426,
        431,
        436,
        441,
        446,
        451,
        456,
        461,
        466,
        471,
        476,
        481,
        486,
        491,
        496,
        501,
        506,
        511,
        516,
        521,
        526,
        531,
        536,
        541,
        546,
        551,
        556
      ],
      "train_rmse": [
        28.940458137988188,
        23.566323566388217,
        19.71814303517289,
        16.727147681528127,
        14.481325703435246,
        12.92487011200081,
        11.641119816319414,
        10.624887542544354,
        9.89095395702207,
        9.38518755065251,
        9.036587087191213,
        8.747231511862335,
        8.514631272717452,
        8.344829782665158,
        8.216883758669237,
        8.106762580434575,
        8.01697039827835,
        7.935725010788624,
        7.867405389155765,
        7.809234491879616,
        7.75514837574022,
        7.707947268941427,
        7.65334509770767,
        7.61172634765537,
        7.578450558179353,
        7.545155540394744,
        7.508986990425412,
        7.476000103327716,
        7.4508485868573215,
        7.425093549977022,
        7.395862854955811,
        7.361574385514711,
        7.336764827357854,
        7.3098804052758775,
        7.279472387533073,
        7.251871719463588,
        7.2267216733837145,
        7.205155619168345,
        7.181189099231725,
        7.15896153894285,
        7.14022022338589,
        7.114964584496822,
        7.09145333858975,
        7.072147011423108,
        7.049916806145244,
        7.029817842842343,
        7.010596049055444,
        6.993059416564678,
        6.9685085939549785,
        6.954531868701415,
        6.937565046197016,
        6.922943521271226,
        6.909670355662152,
        6.8923186003803565,
        6.876531655068576,
        6.861643628038371,
        6.844870230346864,
        6.832334698089433,
        6.816591962322227,
        6.799542827795788,
        6.786415667777115,
        6.773650450892198,
        6.756660646395588,
        6.743694663555951,
        6.7309207543453,
        6.715897539380794,
        6.701180010858449,
        6.685616233864402,
        6.671563399542535,
        6.661152487617088,
        6.645595714491303,
        6.629057925811919,
        6.614096591937213,
        6.59981168962823,
        6.589073867925274,
        6.573702242512709,
        6.562325706005231,
        6.551405443127765,
        6.540079625700896,
        6.530428609053525,
        6.519086415170719,
        6.509951092151541,
        6.499987361971809,
        6.487121610685121,
        6.47420443133272,
        6.464537808870746,
        6.45451294739258,
        6.443688367022136,
        6.4320079099834775,
        6.419647703159138,
        6.408522479215189,
        6.3980499963513875,
        6.388463353703478,
        6.377126797045116,
        6.365642449971203,
        6.354282990751949,
        6.343997173519286,
        6.336834213683751,
        6.327489868304729,
        6.317415688241498,
        6.3080423834613155,
        6.295644585689594,
        6.286833405515406,
        6.278549427421343,
        6.270290662690591,
        6.259465000046862,
        6.248996323023419,
        6.236837230734757,
        6.226923995524509,
        6.215645898297877,
        6.204484686602198,
        6.193257072089646
      ],
      "train_r2": [
        0.07713027766013703,
        0.38805376576414796,
        0.5715880076214412,
        0.6917001051879097,
        0.76892857797147,
        0.8159304422862587,
        0.8506796110404042,
        0.8756120592486701,
        0.8922031787374436,
        0.9029455381695353,
        0.9100215576408366,
        0.9156916021573751,
        0.9201157273807317,
        0.92327011295905,
        0.9256049773250187,
        0.9275856723944451,
        0.9291809406286852,
        0.9306090530005995,
        0.9317987001553829,
        0.9328035203129534,
        0.9337310915985175,
        0.9345353178006696,
        0.9354595205618186,
        0.9361595518769249,
        0.9367165077575206,
        0.9372713432089494,
        0.937871295499101,
        0.9384159577811216,
        0.9388296352807985,
        0.9392517944734197,
        0.9397291533091814,
        0.9402867094952384,
        0.9406885159321409,
        0.9411223947633012,
        0.9416112201250978,
        0.9420531516424935,
        0.9424543828926892,
        0.9427973268179081,
        0.9431772405865259,
        0.9435284572431903,
        0.9438237418813596,
        0.9442204406069927,
        0.9445884762023834,
        0.9448897788302527,
        0.9452356952974306,
        0.9455475108129853,
        0.9458448851030484,
        0.9461154785107695,
        0.9464931635992574,
        0.9467075854832028,
        0.9469673010104915,
        0.9471906075433749,
        0.9473929133561673,
        0.9476567983435963,
        0.9478963092946829,
        0.9481216791344105,
        0.9483750038989527,
        0.9485639203276174,
        0.9488006803107573,
        0.949056471613403,
        0.9492529843288507,
        0.9494437145881528,
        0.9496970090870354,
        0.9498898859950018,
        0.9500795433973486,
        0.9503021366583247,
        0.9505197183806439,
        0.9507492916117218,
        0.9509561191137512,
        0.9511090647150141,
        0.9513371624912147,
        0.9515790593510449,
        0.9517973782613991,
        0.9520053662029664,
        0.9521614126490919,
        0.9523843572097848,
        0.9525490231289278,
        0.9527068165757053,
        0.9528701925028901,
        0.9530091862086219,
        0.9531722738427667,
        0.9533034231004254,
        0.9534462555203804,
        0.9536303654577717,
        0.9538148443657696,
        0.9539526593413193,
        0.9540953641405457,
        0.9542492043329871,
        0.9544149186968736,
        0.9545899494700248,
        0.9547472039651659,
        0.9548949827748369,
        0.9550300494686828,
        0.955189509429822,
        0.9553507594292782,
        0.9555099699696842,
        0.9556538873688457,
        0.9557539725634508,
        0.9558843674292974,
        0.9560247311568905,
        0.9561551287204203,
        0.956327304378021,
        0.9564494646118737,
        0.956564159552456,
        0.956678354863987,
        0.956827815451592,
        0.9569721018142623,
        0.9571393834590509,
        0.9572755260856713,
        0.9574301495919837,
        0.9575828946267244,
        0.9577362714269344
      ],
      "val_rmse": [
        30.830155539686036,
        25.44757220322707,
        21.601556224747206,
        18.55730506886717,
        16.453169751825083,
        14.863193915342356,
        13.644372914806821,
        12.62531939946423,
        11.900259770793859,
        11.343972098819764,
        10.980762101276106,
        10.713304885260774,
        10.500388633431179,
        10.35369095454855,
        10.20660975940186,
        10.0931459459113,
        10.01988349472847,
        9.96393088860674,
        9.914718852261494,
        9.847714002729589,
        9.791827705199294,
        9.751471367621134,
        9.673692285329869,
        9.65392301464012,
        9.606829479525649,
        9.551385702091775,
        9.519544434506747,
        9.466022109045676,
        9.455901026290244,
        9.437246096269782,
        9.418468103065642,
        9.380152232786694,
        9.366478816572698,
        9.336754042022417,
        9.337179819408291,
        9.322096884602376,
        9.299631571286488,
        9.283699176899425,
        9.26967009626723,
        9.255219271853907,
        9.238773703143702,
        9.224011342822507,
        9.229981590235832,
        9.213527821583876,
        9.179695924260333,
        9.172003561792323,
        9.157920994288734,
        9.146785267368543,
        9.132176010606447,
        9.13354014992661,
        9.131203284681666,
        9.13038654208714,
        9.118226415942207,
        9.130881310542545,
        9.12485197323531,
        9.116707458621999,
        9.121425917851957,
        9.109825535878198,
        9.095704279214733,
        9.08998168833794,
        9.092153620789768,
        9.081911210364197,
        9.081090731800137,
        9.07490880700904,
        9.073498890659343,
        9.06964584983989,
        9.067840916349255,
        9.0624126116601,
        9.060710337797632,
        9.053447171018027,
        9.057664831569646,
        9.044262456792588,
        9.04214418634423,
        9.03848947418182,
        9.041859863846295,
        9.038196568249688,
        9.04265353941964,
        9.040961454008436,
        9.03983570992862,
        9.037099068519819,
        9.0316189165595,
        9.03263029650196,
        9.036031873166992,
        9.032771238117167,
        9.036200039127044,
        9.026465715814217,
        9.031533926695005,
        9.023569529303545,
        9.021747707526819,
        9.0190256903615,
        9.035341460691335,
        9.035813797315226,
        9.025997889096088,
        9.027443990363608,
        9.011959920135967,
        9.011717088332185,
        9.004923859887743,
        9.006694038756581,
        9.007994366813934,
        9.006070077973096,
        9.005432862522598,
        9.004957080759953,
        9.005717574845313,
        9.005003672536267,
        9.005596775001985,
        9.01181263074289,
        9.008880551164728,
        8.997478513652672,
        9.004168425211207,
        9.00524833190301,
        9.00118686669547,
        8.995883028500446
      ],
      "val_r2": [
        0.027094102010000398,
        0.3371548007163617,
        0.5223723235610558,
        0.6475080370369674,
        0.7229114617526287,
        0.7738775446906467,
        0.8094422721024327,
        0.8368435856484749,
        0.8550453044620233,
        0.8682806120650746,
        0.8765803331060956,
        0.8825193519215992,
        0.8871425713560136,
        0.8902739362158208,
        0.893369259518059,
        0.8957268457800431,
        0.8972351131618187,
        0.8983796192610496,
        0.8993809501704452,
        0.9007363456981669,
        0.9018598017613585,
        0.9026670907504162,
        0.9042135800009744,
        0.9046046804597745,
        0.9055331206833159,
        0.9066203652925007,
        0.9072419232463006,
        0.908282030057973,
        0.9084780551446299,
        0.9088388142783185,
        0.9092012337884973,
        0.9099384995667981,
        0.910200872886691,
        0.910769928425669,
        0.9107617900485178,
        0.9110498613956534,
        0.9114780665336112,
        0.9117811233171258,
        0.9120475461271227,
        0.9123215569089115,
        0.9126328711511428,
        0.912911850733322,
        0.9127990785253094,
        0.9131096977654494,
        0.9137466452292082,
        0.9138911410990764,
        0.9141553588088415,
        0.9143640003302856,
        0.9146373377179691,
        0.9146118333340871,
        0.9146555217854355,
        0.914670788415917,
        0.9148979251332999,
        0.9146615403198134,
        0.9147742051243559,
        0.9149262761846517,
        0.9148381915821336,
        0.9150546667950801,
        0.9153178123714029,
        0.915424334979262,
        0.9153839136487752,
        0.9155744481608424,
        0.9155897018282635,
        0.9157045868166979,
        0.9157307777683205,
        0.91580233204236,
        0.9158358407529519,
        0.9159365774015712,
        0.9159681552017515,
        0.9161028229384336,
        0.9160246356513021,
        0.9162729638160415,
        0.9163121788958463,
        0.9163798161907467,
        0.9163174417971574,
        0.9163852357801792,
        0.9163027501920397,
        0.9163340705659352,
        0.9163549047573792,
        0.9164055410720259,
        0.9165068947108523,
        0.9164881941919596,
        0.9164252833255725,
        0.9164855880007965,
        0.9164221725456542,
        0.9166021454050791,
        0.9165084660867889,
        0.9166556540540071,
        0.9166893044217751,
        0.9167395693904001,
        0.9164380541576107,
        0.9164293172661012,
        0.9166107899254887,
        0.9165840673616288,
        0.9168699756330144,
        0.9168744555334967,
        0.9169997319862493,
        0.9169670965605538,
        0.91694311932594,
        0.9169786007774517,
        0.9169903485534109,
        0.9169991195776546,
        0.9169850996676256,
        0.9169982606799554,
        0.9169873267238515,
        0.9168726929266744,
        0.9169267766584476,
        0.9171369258754956,
        0.9170136574011777,
        0.916993750425527,
        0.9170686069887792,
        0.9171663107931463
      ]
    }
  },
  "NO2_metrics": {
    "train_rmse": 6.318778931285085,
    "train_mae": 4.243227305123458,
    "train_bias": -0.004075601352037571,
    "train_r2": 0.922029359707469,
    "val_rmse": 9.91592608005729,
    "val_mae": 6.322188698700051,
    "val_bias": -0.9619204353507046,
    "val_r2": 0.8658798789933164,
    "best_iteration": 300,
    "training_history": {
      "iterations": [
        1,
        6,
        11,
        16,
        21,
        26,
        31,
        36,
        41,
        46,
        51,
        56,
        61,
        66,
        71,
        76,
        81,
        86,
        91,
        96,
        101,
        106,
        111,
        116,
        121,
        126,
        131,
        136,
        141,
        146,
        151,
        156,
        161,
        166,
        171,
        176,
        181,
        186,
        191,
        196,
        201,
        206,
        211,
        216,
        221,
        226,
        231,
        236,
        241,
        246,
        251,
        256,
        261,
        266,
        271,
        276,
        281,
        286,
        291,
        296
      ],
      "train_rmse": [
        21.697510129225954,
        17.843379781757733,
        14.917204356238,
        12.977694591964463,
        11.478318736899604,
        10.356669367518853,
        9.562480784285937,
        8.966943079200815,
        8.512058404907362,
        8.19144336489365,
        7.946924557688022,
        7.763099995112358,
        7.618702956462692,
        7.49678459620173,
        7.398078397357331,
        7.323064689222651,
        7.256927040311648,
        7.206260760704646,
        7.154613663582457,
        7.1126730063380075,
        7.071070866455259,
        7.03536002373563,
        7.004729606635008,
        6.975922650035013,
        6.945186444829327,
        6.913422862257119,
        6.89017440764954,
        6.862591786361894,
        6.838849533361548,
        6.815564281515188,
        6.793604744750226,
        6.77283306848378,
        6.7486490491124345,
        6.731325478370173,
        6.714590229921944,
        6.693403834577114,
        6.670703669188139,
        6.654430872042817,
        6.639476268642061,
        6.622198624450683,
        6.6039684552793085,
        6.587140279968848,
        6.571609022051363,
        6.55450185926115,
        6.539118922188954,
        6.5250980658762625,
        6.507668606974071,
        6.492203888182717,
        6.473821218276043,
        6.457249530451636,
        6.442246619744862,
        6.432284690858523,
        6.418944781708114,
        6.40610157065316,
        6.3956169896001605,
        6.38379232965834,
        6.3698669857604795,
        6.357458901653987,
        6.342969359004599,
        6.326678528449769
      ],
      "train_r2": [
        0.08064217387051287,
        0.37824538689310716,
        0.5654500978299519,
        0.6711030266424024,
        0.7427109292138941,
        0.7905381179540905,
        0.8214310566650685,
        0.8429804950826917,
        0.8585073216548911,
        0.8689655036796079,
        0.8766716394916484,
        0.8823111989890539,
        0.886648607307183,
        0.8902473935433026,
        0.8931184763490708,
        0.8952749638543279,
        0.8971580526868195,
        0.8985890796566783,
        0.900037489871623,
        0.9012060239900722,
        0.9023583392893071,
        0.9033420831211924,
        0.9041819057430964,
        0.9049683891958682,
        0.9058039707838722,
        0.9066636054275383,
        0.9072902930932765,
        0.9080310750133067,
        0.9086663371360384,
        0.9092872330158093,
        0.909870838763395,
        0.9104211421070434,
        0.9110597254087498,
        0.9115157531506457,
        0.9119551807459378,
        0.9125099158624165,
        0.9131023413842448,
        0.9135257879267505,
        0.913914020811214,
        0.9143614740757783,
        0.9148323315637006,
        0.915265825578711,
        0.915664929525451,
        0.9161034388518209,
        0.9164967749451376,
        0.9168544780432104,
        0.9172980716747596,
        0.9176906676994756,
        0.9181561254054853,
        0.9185745970244537,
        0.9189525284882105,
        0.919202989218632,
        0.9195377713948867,
        0.9198594316045612,
        0.9201215419329083,
        0.9204166385415428,
        0.9207634596474223,
        0.9210718541806899,
        0.9214312208719615,
        0.9218342835160563
      ],
      "val_rmse": [
        34.08543467472125,
        27.993689003964732,
        23.28251416867205,
        20.149185177255912,
        17.686639440252556,
        15.808391968417808,
        14.478188491505643,
        13.449077337174103,
        12.722713651407448,
        12.189886689526496,
        11.777070714943369,
        11.510690630469227,
        11.260083215511038,
        11.034346474969976,
        10.869448719078274,
        10.724218883569156,
        10.620038906426702,
        10.542991427431732,
        10.458118688795128,
        10.394446342904624,
        10.324124084048877,
        10.29322221035099,
        10.25557042026188,
        10.234816526412793,
        10.21363234881672,
        10.176490100151875,
        10.152232546239983,
        10.131575866323374,
        10.101632111749915,
        10.079033773064669,
        10.06114201803459,
        10.054182053763196,
        10.045515993622937,
        10.044571994264402,
        10.046887062580465,
        10.034082409736001,
        10.022459087017896,
        10.016465255217348,
        10.020527592976746,
        10.009703776886846,
        9.997860990957005,
        9.997530636390909,
        9.989463589434143,
        9.986952786047086,
        9.976949959222194,
        9.962945674021922,
        9.936076843163972,
        9.945439177649451,
        9.92988856918,
        9.929019363851323,
        9.92273772106839,
        9.925907156196468,
        9.926935363737034,
        9.932632206913414,
        9.929034937788199,
        9.932381852045335,
        9.937802507604925,
        9.932601261834542,
        9.924723539425882,
        9.919821497571688
      ],
      "val_r2": [
        -0.5847656485339756,
        -0.0689260040775137,
        0.26058692271255257,
        0.44621351617304317,
        0.5733045418146658,
        0.6591190223169653,
        0.7140725650522581,
        0.7532754546746162,
        0.7792061965713002,
        0.7973126181937369,
        0.8108083604088345,
        0.8192700457112041,
        0.8270539785866925,
        0.8339187486101922,
        0.8388455095634961,
        0.8431232027575277,
        0.8461563443943881,
        0.8483804922925546,
        0.8508117883371322,
        0.8526228686540955,
        0.8546102443473862,
        0.8554792947279277,
        0.8565346515301077,
        0.8571147171506123,
        0.8577055972373924,
        0.8587386331092284,
        0.8594112758681389,
        0.8599828037145301,
        0.8608092190652468,
        0.8614312892418404,
        0.8619228119372632,
        0.8621137802976495,
        0.8623513760144239,
        0.8623772450902272,
        0.8623137993215605,
        0.8626645349299791,
        0.8629825251167973,
        0.8631463599836633,
        0.8630353311064056,
        0.8633310599913335,
        0.8636542630677118,
        0.8636632733335368,
        0.8638832058519601,
        0.8639516218493849,
        0.8642240146162017,
        0.8646049148181816,
        0.8653342176304994,
        0.86508031860974,
        0.8655019074063208,
        0.8655254527545502,
        0.8656955508941114,
        0.8656097404590046,
        0.8655818965082133,
        0.8654275732345307,
        0.865525030900251,
        0.8654343570229273,
        0.8652874369672868,
        0.8654284117530193,
        0.8656417893344436,
        0.8657744815779341
      ]
    }
  },
  "model_type": "XGBoost",
  "hyperparameters": {
    "O3": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    },
    "NO2": {
      "objective": "reg:squarederror",
      "n_estimators": 1000,
      "max_depth": 4,
      "learning_rate": 0.05,
      "subsample": 0.6,
      "colsample_bytree": 0.6,
      "min_child_weight": 3,
      "gamma": 0.2,
      "reg_alpha": 1.0,
      "reg_lambda": 3.0,
      "eval_metric": "rmse",
      "random_state": 42,
      "n_jobs": -1
    }
  },
  "improvements_applied": [
    "Added lag features (NO2/O3_target_lag1, lag2, lag3, lag6, lag12)",
    "Added rolling window features (NO2_roll3, roll6, roll12, O3_roll3, etc.)",
    "Fixed satellite noise (smooth and drop raw columns)",
    "Improved temporal features (sin/cos encoding for hour and month)",
    "True time-series split (Jan-Oct train, Nov val, Dec test)",
    "Optimized hyperparameters (max_depth=5, etc.)"
  ]
}